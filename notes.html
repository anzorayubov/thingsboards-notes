<h1>Observable with native JS for TB</h1>

Emitter = function() {};

(function() {
    this.Emitter = {
    listeners: {},
    emit: (event, ...arg) => {
        if (!Array.isArray(this.Emitter.listeners[event])) {
            return false
        }
        this.Emitter.listeners[event].forEach(listener => {
            listener(...arg)
        })
        return true
    },
    subscribe:(event, fn) => {
        this.Emitter.listeners[event] = this.Emitter.listeners[event] || []
        this.Emitter.listeners[event].push(fn)
        return () => {
            this.Emitter.listeners[event] = this.Emitter.listeners[event].filter(listener => listener !== fn)
        }
    }
}
}).call(Emitter);

exports = {}
exports.Emitter = Emitter;

    // подписка
    try {
        exports.Emitter.Emitter.subscribe('addNewPolygon', (data) => {
           console.log(data)
        })    
    } catch (e) {}

------------------------------------------------------------------------------------------------------------------------------

<h1>Observable with native JS</h1>
<p>
export class Emitter {
    constructor() {
        this.listeners = {}
    }
    // event - название ивента которое имитим
    emit(event, ...arg) {
        if (!Array.isArray(this.listeners[event])) {
        return false
    }
    this.listeners[event].forEach(listener => {
        listener(...arg)
    })
        return true
    }
    subscribe(event, fn) {
        this.listeners[event] = this.listeners[event] || []
        this.listeners[event].push(fn)
        return () => {
            this.listeners[event] = this.listeners[event].filter(listener => listener !== fn)
        }
    }
}
</p>

<h1>How work with services</h1>

<p>
    Для перехода между состояниями дашборда
    self.ctx.stateController.openState( /* тут наименование состояния */ , {}, false)
</p>

<h1>Для отслеживания изменения переменной</h1>
// каждую секунду записываем время из ТВ в currentTimeInTB
setInterval(() => {
    if (typeof self.ctx != 'undefined' && typeof self.ctx.dashboardTimewindow.history != 'undefined' && typeof self.ctx != 'undefined') { 
        currentTimeInTB =  self.ctx.dashboardTimewindow.history.fixedTimewindow.startTimeMs+self.ctx.dashboardTimewindow.history.fixedTimewindow.endTimeMs
    }
}, 1000)
// каждую секуду проверяем изменилась ли переменная
setInterval(() => {
    if(currentTimeInTB != oldTime) {
        if (typeof self.ctx != 'undefined' && typeof self.ctx.dashboardTimewindow.history != 'undefined' && typeof self.ctx != 'undefined') {
            // do code
        }
    oldTime = currentTimeInTB;
    }
}, 1000)

<h1>Приличный скролл, CSS</h1>
<p>
    ./ Ваш класс /::-webkit-scrollbar-track {
        border-radius: 10px;
        background-color: #fff;
    }
    ./ Ваш класс /::-webkit-scrollbar {
        width: 8px;
        background-color: #F5F5F5;
    }
    ./ Ваш класс /::-webkit-scrollbar-thumb {
        border-radius: 10px;
        background-color: #dadada;
    }
</p>
